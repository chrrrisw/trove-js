<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">

    <title>Trove-js by chrrrisw</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A JavaScript library to access the National Library of Australia&#39;s (NLA) Trove API">
    <meta name="keywords" content="NLA, Trove, search, API, javascript, library">

    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Open+Sans:400,700'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">

    <link rel="canonical" href="https://chrrrisw.github.io/trove-js/">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68763720-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <section class="page-header">
      <h1 class="project-name">Trove-js</h1>
      <h2 class="project-tagline">A JavaScript library to access the National Library of Australia&#39;s Trove API</h2>
      <a href="https://github.com/chrrrisw/trove-js" class="btn">View on GitHub</a>
      <a href="https://github.com/chrrrisw/trove-js/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/chrrrisw/trove-js/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
        <a id="trove-js" class="anchor" href="#trove-js" aria-hidden="true">
          <span class="octicon octicon-link"></span>
        </a>trove-js
      </h1>

      <p>trove-js is a JavaScript library to access the National Library of Australia's (NLA) Trove v2 API.</p>

      <p>The Trove website can be found at: <a href="https://trove.nla.gov.au">https://trove.nla.gov.au</a></p>

      <p>Trove's v2 API is documented at: <a href="http://help.nla.gov.au/trove/building-with-trove/api-version-2-technical-guide">http://help.nla.gov.au/trove/building-with-trove/api-version-2-technical-guide</a></p>

      <p>This library works with: <a href="https://api.trove.nla.gov.au/v2">https://api.trove.nla.gov.au/v2</a></p>

      <h2>A Simple Search Example</h2>

      <p>First, we need to initialise the library with your key. This key will be passed along with every query to the Trove servers and is a required parameter.</p>

      <div class="highlight highlight-source-js"><pre>Trove.init(your_key);</pre></div>

      <p>You can do that here:</p>

      <label for="trovekey">Enter your trove key here:</label>
      <input id="trovekey" type="text">
      <button id="initbutton">Call Trove.init()</button>

      <p>Now, let's search the newspaper zone. First we create a Search object. The <em>zones</em> we search can be specified on construction, as we do here, or passed with each call to the query() method. The same is true for the <em>done</em> callback.</p>

      <div class="highlight highlight-source-js"><pre>var newspaper_search = new Trove.Search({
    zones: [Trove.ZONES.NEWSPAPER],
    done: newspaper_search_done
});
</pre></div>

      <p>Then we call the query() method on the search object. Again, we can specify search <em>terms</em> on construction, but it makes sense here to specify them every time you call query() so that we can update them with the current value in the text input (known here as 'trovesearch').</p>

      <div class="highlight highlight-source-js"><pre>newspaper_search.query({
    terms: trovesearch.val(),
    number: 10
});
</pre></div>

      <label for="trovesearch">Enter your search here:</label>
      <input id="trovesearch" type="text">
      <button id="searchbutton">Call Search.query()</button>

      <p>The done callback on this page just populates the following table with a couple of fields from the metadata. The callback is called with the Search object as the argument, and the Search object contains an <em>items</em> object that contains a list for each zone searched. The callback is used to handle the results, because calling the query() method results in an asynchronous call to the Trove server that will return at some unknown time in the future.</p>

      <div class="highlight highlight-source-js"><pre>function newspaper_search_done(s) {
    var idlink, snippet;
    for (var index in s.items[Trove.ZONES.NEWSPAPER]) {
        idlink = "&lt;a href='" +
            s.items[Trove.ZONES.NEWSPAPER][index].troveUrl +
            "'&gt;" +
            s.items[Trove.ZONES.NEWSPAPER][index].id +
            "&lt;/a&gt;";
        snippet = s.items[Trove.ZONES.NEWSPAPER][index].snippet;
        newspapertable.append("&lt;tr&gt;&lt;td&gt;" + idlink + "&lt;/td&gt;&lt;td&gt;" + snippet + "&lt;/td&gt;&lt;/tr&gt;");
    }
}
</pre></div>

      <p>Here's the results:</p>

      <table>
        <thead>
          <tr><th>ID/Link</th><th>Snippet</th></tr>
        </thead>
        <tbody id="newspapertable">

        </tbody>
      </table>

<!--

      <h2>
        <a id="if-you-just-want-to-use-the-library-in-your-webpage" class="anchor" href="#if-you-just-want-to-use-the-library-in-your-webpage" aria-hidden="true">
          <span class="octicon octicon-link"></span>
        </a>If you just want to use the library in your webpage
      </h2>

      <ol>
        <li>Get a Trove API key: <a href="#getting_key">see here</a></li>
        <li>Download dist/trove-api.js or dist/trove-api.min.js</li>
        <li>Include it in your web page</li>
        <li>Use it</li>
      </ol>

<h2>
<a id="developing-the-library" class="anchor" href="#developing-the-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developing the library</h2>

<p>Source files are in <code>src</code>, concatenated and minified distribution files are in <code>dist</code>.</p>

<p>You'll need <code>npm</code> and <code>grunt-cli</code> installed to generate the distribution files.</p>

<p>Clone this repository, and go to the directory created. Type:</p>

<div class="highlight highlight-source-shell"><pre>npm install</pre></div>

<p>This will install the dependencies for building and testing.</p>

<p>There are a number of grunt tasks defined, but be aware that the unit tests will need a Trove API key in the <code>__key_file__</code> file.</p>

<table>
<thead>
<tr>
<th align="left">Task</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">default</td>
<td align="left">Check code style, generate the docs, run unit tests, concatenate and uglify the source files.</td>
</tr>
<tr>
<td align="left">prepare</td>
<td align="left">Used to prepare the code for uploading to GitHub (code style, docs, concat and uglify).</td>
</tr>
<tr>
<td align="left">test</td>
<td align="left">Checks code style and runs unit tests (you'll need an API key to run the tests).</td>
</tr>
</tbody>
</table>

<p>To build the dist/trove-api.js after modifying a source file just type:</p>

<div class="highlight highlight-source-shell"><pre>grunt</pre></div>

<p>to run the default task, or</p>

<div class="highlight highlight-source-shell"><pre>grunt prepare</pre></div>

<p>which should check your files for code style and produce a concatenated file, as well as an uglified one.</p>

<h2>
<a id="getting-an-api-key" class="anchor" href="#getting-an-api-key" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="getting_key"></a>Getting an API key</h2>

<p>You'll need to get an API key first, by signing up and requesting one. Instructions for doing so are found at <a href="http://help.nla.gov.au/trove/building-with-trove/api">Trove Help</a>.</p>

<p>Both the unit tests and the demo page will load a key from the <code>__key_file__</code> file. So if you want to run the tests or
try out the demo page, put your key in this file (<strong>DON'T commit and push this change to GitHub</strong>).</p>

<p>Please comply with the conditions of use, an put "powered by trove" somewhere on your site.</p>

<h2>
<a id="library-initialisation" class="anchor" href="#library-initialisation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Library initialisation</h2>

<p>In your JavaScript, initialise the library first giving it your key:</p>

<div class="highlight highlight-source-js"><pre>Trove.init(your_key);</pre></div>

<h2>
<a id="asynchrony" class="anchor" href="#asynchrony" aria-hidden="true"><span class="octicon octicon-link"></span></a>Asynchrony</h2>

<p>Remember that each time you make a call for data, the data will not be available until the Trove servers respond. For example, if you were to write:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> article <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Trove.NewspaperArticle</span>({
    init<span class="pl-k">:</span> <span class="pl-c1">18342701</span>
});
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(article.heading);</pre></div>

<p>you would, more than likely, see 'undefined' at the console.  For this reason, the API provides a parameter for a function to be called when the request completes:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> article <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Trove.NewspaperArticle</span>({
    init<span class="pl-k">:</span> <span class="pl-c1">18342701</span>,
    <span class="pl-en">done</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">a</span>) {<span class="pl-en">console</span>.<span class="pl-c1">log</span>(a.heading)};
});</pre></div>

<p>You could also write:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">function</span> <span class="pl-en">done_callback</span>(<span class="pl-smi">a</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(a.heading);
}

<span class="pl-k">var</span> article <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Trove.NewspaperArticle</span>({
    init<span class="pl-k">:</span> <span class="pl-c1">18342701</span>,
    done<span class="pl-k">:</span> done_callback
});</pre></div>

<p>to get the same result. The parameter to the called function is the object that has been updated by the request.</p>

-->

<h2>
<a id="examples-and-documentation" class="anchor" href="#examples-and-documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples and Documentation</h2>

<p>Please see the <a href="https://github.com/chrrrisw/trove-js/wiki">wiki</a> for more examples.</p>

<p>There are API docs <a href="https://github.com/chrrrisw/trove-js/blob/master/docs/api.md">here</a> and you can build HTML API pages using <code>grunt jsdoc</code>.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/chrrrisw/trove-js">Trove-js</a> is maintained by <a href="https://github.com/chrrrisw">chrrrisw</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="js/trove-api.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
  </body>
</html>
