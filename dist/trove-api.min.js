/*! trove-api 02-10-2015 */
!function(a,b,c){"use strict";a.trove_key="",a.init=function(b){a.trove_key=b};var d={BOOK:"book",PICTURE:"picture",ARTICLE:"article",MUSIC:"music",MAP:"map",COLLECTION:"collection",NEWSPAPER:"newspaper",LIST:"list",ALL:"all"};a.ZONE=d;var e={FORMAT:"format",DECADE:"decade",YEAR:"year",MONTH:"month",LANGUAGE:"language",AVAILABILITY:"availability",AUSTRALIAN:"australian",OCCUPATION:"occupation",ZOOM:"zoom",VENDORDB:"vendordb",VENDOR:"vendor",AUDIENCE:"audience",TITLE:"title",CATEGORY:"category",ILLUSTRATED:"illustrated",ILLTYPE:"illtype",WORD:"word",ALL:"all"};a.FACETS=e;var f={FORMAT:"l-format",DECADE:"l-decade",YEAR:"l-year",MONTH:"l-month",LANGUAGE:"l-language",AVAILABILITY:"l-availability",AUSTRALIAN:"l-australian",OCCUPATION:"l-occupation",ZOOM:"l-zoom",VENDORDB:"l-vendordb",VENDOR:"l-vendor",AUDIENCE:"l-audience",TITLE:"l-title",CATEGORY:"l-category",ILLUSTRATED:"l-illustrated",ILLTYPE:"l-illtype",WORD:"l-word",ALL:"l-all"};a.LIMITS=f;var g={DATEDESC:"datedesc",DATEASC:"dateasc",RELEVANCE:"relevance"};a.SORTBY=g;var h={FULL:"full",BRIEF:"brief"};a.RECLEVEL=h;var i={TAGS:"tags",COMMENTS:"comments",LISTS:"lists",HOLDINGS:"holdings",LINKS:"links",SUBSCRIBINGLIBS:"subscribinglibs",WORKVERSIONS:"workversions",ARTICLETEXT:"articletext",YEARS:"years",LISTITEMS:"listitems",ALL:"all"};a.INCLUDE=i;var j={nsw:"nsw",act:"act",qld:"qld",tas:"tas",sa:"sa",nt:"nt",wa:"wa",vic:"vic",national:"national"};a.STATES=j;var k={ARTICLE:"Article",ADVERTISING:"Advertising",LISTS:"Detailed lists, results, guides",FAMILY_NOTICES:"Family Notices",LITERATURE:"Literature"};a.CATEGORIES=k;var l={people:"people",list:"list",newspaper:"article",article:"work",collection:"work",book:"work",picture:"work",map:"work",music:"work"};a.SEARCH_RECORDS=l;var m={};a.CONSTRUCTORS=m;var n="http://api.trove.nla.gov.au/",o={WORK:"work/",NEWS:"newspaper/",LIST:"list/"};a.RECORD_TYPE=o;var p={WORK:n+o.WORK,LIST:n+o.LIST,NP_ARTICLE:n+o.NEWS,NP_TITLE:n+o.NEWS+"title/",NP_TITLES:n+o.NEWS+"titles",QUERY:n+"result"};a.API=p}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){console.log("Creating Work"),b.extend(this,a)}d.prototype.get=function(a){console.log("Getting work")},a.Work=d,a.CONSTRUCTORS.work=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){b.extend(this,a),this.response=c,this.items={},this._last_search=c,this.facets=[],this.limits={}}d.prototype.process_results=function(b){var d,e;this.items={},this.response=b.response;for(var f in this.response.zone){e=this.response.zone[f].name,this.items[e]=[],d=this.response.zone[f].records[a.SEARCH_RECORDS[e]];for(var g in d)this.items[e].push(new a.CONSTRUCTORS[e](d[g]))}this.done!==c&&this.done(this)},d.prototype.process_fail=function(a,b,d){console.error(b),this.fail!==c&&this.fail(this)},d.prototype.remove_facet=function(a){-1!=this.facets.indexOf(a)&&this.facets.splice(this.facets.indexOf(a),1)},d.prototype.add_facet=function(a){this.facets.push(a)},d.prototype.clear_date_range_limit=function(){this.limits.decade!==c&&delete this.limits.decade,this.limits.year!==c&&delete this.limits.year,this.limits.month!==c&&delete this.limits.month},d.prototype.limit_date_range=function(a){var b=a.split("-");b.length>=1&&(3==b[0].length?this.limits.decade=b[0]:4==b[0].length&&(this.limits.decade=b[0].substr(0,3),this.limits.year=b[0])),b.length>=2&&(this.limits.month=b[1])},d.prototype.query=function(d){if(d===c)return void console.error("options is undefined");this.done=d.done||this.done,this.fail=d.fail||this.fail;var e=a.ZONE.ALL;"string"==typeof d.zones?e=d.zones:Array.isArray(d.zones)?e=d.zones.join(","):"string"==typeof this.zones?e=this.zones:Array.isArray(this.zones)&&(e=this.zones.join(","));var f={key:a.trove_key,encoding:"json",zone:e,q:d.terms||this.terms,s:0,n:20};d.start!==c&&(f.s=d.start),d.number!==c&&(f.n=d.number),d.sort!==c&&(f.sortby=d.sort),d.reclevel!==c&&(f.reclevel=d.reclevel),"string"==typeof d.includes?f.include=d.includes:Array.isArray(d.includes)?f.include=d.includes.join(","):"string"==typeof this.includes?f.include=this.includes:Array.isArray(this.includes)&&(f.include=this.includes.join(",")),d.facets!==c&&Array.isArray(d.facets)?f.facet=d.facets.join(","):this.facets.length>0&&(f.facet=this.facets.join(","));var g,h;if(d.limits!==c?(h=Object.keys(d.limits),g=d.limits):(h=Object.keys(this.limits),g=this.limits),h.length>0)for(var i in h)f["l-"+h[i]]=g[h[i]];this._last_search=f,b.ajax({dataType:"jsonp",url:a.API.QUERY,data:f,context:this}).done(this.process_results).fail(this.process_fail)},d.prototype.requery=function(d,e){d&&(this.done=d.done||this.done,this.fail=d.fail||this.fail),this._last_search!==c&&(this._last_search.s=this._last_search.s+e,b.ajax({dataType:"jsonp",url:a.API.QUERY,data:this._last_search,context:this}).done(this.process_results).fail(this.process_fail))},d.prototype.next=function(a){this._last_search!==c&&this.requery(a,this._last_search.n)},d.prototype.previous=function(a){this._last_search!==c&&this.requery(a,-this._last_search.n)},d.prototype.newspaper_articles=function(){return[]},a.Search=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){b.extend(this,a)}a.List=d,a.CONSTRUCTORS.list=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){b.extend(this,a)}a.Person=d,a.CONSTRUCTORS.people=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(b){console.log("Creating Article"),a.CONSTRUCTORS.work.call(this,b)}d.prototype=Object.create(a.CONSTRUCTORS.work.prototype),d.prototype.constructor=d,a.Article=d,a.CONSTRUCTORS.article=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(b){console.log("Creating Picture"),a.CONSTRUCTORS.work.call(this,b)}d.prototype=Object.create(a.CONSTRUCTORS.work.prototype),d.prototype.constructor=d,a.Picture=d,a.CONSTRUCTORS.picture=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(b){console.log("Creating Book"),a.CONSTRUCTORS.work.call(this,b)}d.prototype=Object.create(a.CONSTRUCTORS.work.prototype),d.prototype.constructor=d,a.Book=d,a.CONSTRUCTORS.book=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(b){console.log("Creating Map"),a.CONSTRUCTORS.work.call(this,b)}d.prototype=Object.create(a.CONSTRUCTORS.work.prototype),d.prototype.constructor=d,a.Map=d,a.CONSTRUCTORS.map=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(b){console.log("Creating Music"),a.CONSTRUCTORS.work.call(this,b)}d.prototype=Object.create(a.CONSTRUCTORS.work.prototype),d.prototype.constructor=d,a.Music=d,a.CONSTRUCTORS.music=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(b){console.log("Creating Collection"),a.CONSTRUCTORS.work.call(this,b)}d.prototype=Object.create(a.CONSTRUCTORS.work.prototype),d.prototype.constructor=d,a.Collection=d,a.CONSTRUCTORS.collection=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){var d;a.init!==c&&(d=a.init,delete a.init),b.extend(this,a),d!==c&&this.get({identifier:d,done:this.done})}d.prototype.get=function(d){var e={key:a.trove_key,encoding:"json"};b.ajax({dataType:"jsonp",url:a.API.NP_ARTICLE+d.identifier,data:e,context:this}).done(function(a){b.extend(this,a.article),d.done!==c?d.done(this):this.done!==c&&this.done(this)})},d.prototype.get_newspaper=function(b){return this.title!==c&&this.title.id!==c?new a.CONSTRUCTORS.newspaper_title({init:this.title.id,done:b.done||this.done}):void 0},a.NewspaperArticle=d,a.CONSTRUCTORS.newspaper=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){var d;a.init!==c&&(d=a.init,delete a.init),b.extend(this,a),d!==c&&this.get({identifier:d,done:this.done})}d.prototype.get=function(d){var e={key:a.trove_key,encoding:"json"};b.ajax({dataType:"jsonp",url:a.API.NP_TITLE+d.identifier,data:e,context:this}).done(function(a){b.extend(this,a.newspaper),d.done!==c?d.done(this):this.done!==c&&this.done(this)})},a.Newspaper=d,a.CONSTRUCTORS.newspaper_title=d}(window.Trove=window.Trove||{},jQuery),function(a,b,c){"use strict";function d(a){b.extend(this,a),this.newspapers=[],this.state!==c&&this.get({state:this.state})}d.prototype.processGet=function(b){for(var d in b.response.records.newspaper)this.newspapers.push(new a.CONSTRUCTORS.newspaper_title(b.response.records.newspaper[d]));this.done!==c&&this.done(this)},d.prototype.get=function(d){this.done=d.done||this.done,this.fail=d.fail||this.fail;var e={key:a.trove_key,encoding:"json"};d!==c&&d.state!==c?e.state=d.state:this.state!==c&&(e.state=this.state),b.ajax({dataType:"jsonp",url:a.API.NP_TITLES,data:e,context:this}).done(this.processGet)},a.NewspaperList=d}(window.Trove=window.Trove||{},jQuery);